CREATE TABLE IF NOT EXISTS medium (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    label_en TEXT UNIQUE NOT NULL,
    label_ja TEXT UNIQUE NOT NULL,
    sort_order INTEGER
);

CREATE TABLE IF NOT EXISTS series (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    label_en TEXT,
    label_ja TEXT,
    mediumId INTEGER NOT NULL,
    sort_order INTEGER
);

CREATE TABLE IF NOT EXISTS season (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    label_en TEXT,
    label_ja TEXT,
    seriesId INTEGER NOT NULL,
    sort_order INTEGER
);

CREATE TABLE IF NOT EXISTS video (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    identifier TEXT,
    label_en TEXT,
    label_ja TEXT,
    path TEXT UNIQUE NOT NULL,
    spoken_langs TEXT NOT NULL,
    subtitle_langs TEXT NOT NULL,
    immersible BOOLEAN NOT NULL,
    streamable BOOLEAN NOT NULL DEFAULT 1,
    mediumId INTEGER NOT NULL,
    seriesId INTEGER,
    seasonId INTEGER,
    sort_order INTEGER,
    durationSeconds INTEGER
);

CREATE TABLE IF NOT EXISTS viewing (
    videoId INTEGER,
    startTime INTEGER NOT NULL,
    endTime INTEGER NOT NULL,
    elapsedSeconds INTEGER
);

INSERT INTO medium (label_en, label_ja) VALUES
    ("Movie", "映画"),
    ("TV", "テレビ"),
    ("Commercial", "広告"),
    ("Short", "短編映画"),
    ("Talk", "トーク");
