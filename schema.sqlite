CREATE TABLE IF NOT EXISTS tree (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    parentId INTEGER,
    label_en TEXT,
    label_ja TEXT,
    sort_order INTEGER
);

CREATE TABLE IF NOT EXISTS video (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    identifier TEXT,
    label_en TEXT,
    label_ja TEXT,
    path TEXT UNIQUE NOT NULL,
    spoken_langs TEXT NOT NULL,
    subtitle_langs TEXT NOT NULL,
    immersible BOOLEAN NOT NULL,
    streamable BOOLEAN NOT NULL DEFAULT 1,
    treeId INTEGER NOT NULL,
    sort_order INTEGER,
    durationSeconds INTEGER
);

CREATE TABLE IF NOT EXISTS viewing (
    videoId INTEGER,
    startTime INTEGER NOT NULL,
    endTime INTEGER NOT NULL,
    elapsedSeconds INTEGER
);

INSERT INTO tree (label_en, label_ja) VALUES
    ("Movies", "映画"),
    ("TV", "テレビ"),
    ("Shorts", "短編映画"),
    ("LP", "実況プレイ"),
    ("Commercials", "広告"),
    ("Talk", "トーク");
